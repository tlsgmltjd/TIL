# 비연결성

- HTTP는 기본적으로 연결을 유지하지 않는 모델이다.

- 일반적으로 초 단위 이하의 빠른 속도로 응답한다.

연결을 유지하는 모델은 여러 클라이언트에서 서버에 요청을 할때 연결을 하고 응답을 받은 후에도 연결을 유지한다.

연결 유지의 단점은 연결이 끝났는대도 요청이 없는 대도 다른 클라이언트가 서버에 요청을 보낼 때도 불필요한 서버 자원이 낭비되게 연결되는 것이다.

연결을 유지하지 않는 모델은 클라이언트에서 서버에 요청을 보내기 위해 TCP/IP 연결을 한 후 요청 - 응답 과정 후 바로 연결을 끊는다.

- 1시간동안 수청명이 서비스를 사용해도 실제 서버에서 동시 처리하는 요청은 수십개 이하로 매우적음

- 서버 자원을 아주 효과적으로 사용할 수 있다.

## 비연결성 한계와 극복

- 요청을 할때 마다 TCP/IP 연결을 새로 맺어야한다.
- 웹 브라우저로 사이트를 요청하면 HTML, JS, CSS, Image 등등 수 많은 자원도 함께 다운로드 되는데 이런 자원들을 불러올 때 불필요하게 각각 연결 - 요청 - 응답 - 해제 를 반복해야한다.
- 지금은 **HTTP 지속 연결** (Persistent Connections)로 문제 해결
- HTTP/2, HTTP/3에서 더 많은 최적화가 되었다.

## 지속 연결

### HTTP 초기

페이지를 불러올때

연결 - 요청 - HTML응답 - 종료

연결 - 요청 - JS응답 - 종료

연결 - 요청 - CSS응답 - 종료

연결 - 요청 - Image응답 - 종료

이렇게 여러가지 자원을 응답 받을때는 연결을 종료하는 것이 불필요한 효과를 불러온다.

### 지속 연결

연결 - 요청 -

HTML응답  
JS응답  
CSS응답  
Image응답

- 종료

이렇게 지속 연결은 내부 메커니즘으로 페이지 하나를 다 받을 때 까지 연결이 유지된다!

## Stateless를 기억하자..

서버 개발자들이 힘들어하는 업무

- 같은 시간에 딱 맞추어 발생하는 대용량 트래픽
- ex. 선착순 이벤트

최대한 Stateless 하게 설계하면 대용량 트레픽이 와도 서버를 스케일 아웃하여 대응할 수 있다!
